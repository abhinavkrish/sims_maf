{% extends "master.html" %}

{% block moresidebar %}

</br>
</br>

{% set selectGroups = run.groupWithMetricIds(metricIds.keys()) %} 

{% for g in selectGroups.keys() %} 
  {% for sg in selectGroups[g] %}
    <a href="#{{g}}_{{sg}}">{{g}} : {{sg}}</a><br>
 {% endfor %}
{% endfor %}

{% endblock %}


{% block content %}

{# show metric information for each metric selected from 'select' page #}

{% set selectGroups = run.groupWithMetricIds(metricIds.keys()) %}
{% for g in selectGroups.keys() %}
 {% for sg in selectGroups[g] %}
  <a name = "{{g}}_{{sg}}"> </a>
  {% set subsetMetricIds = run.metricIdsInSubgroup(metricIds.keys(), g, sg) %}
  {% for metricId in subsetMetricIds %}  
  {% set metric = run.metricWithMetricId(metricId) %}   
  {% set plotdict = run.plotsForMetric(metric) %}
  {% set metricInfo = run.metricInfo(metric) %}
   <div>
    <b>
  {% for key in metricInfo %}
   {{ '%s' %(metricInfo[key][0]) }}  /
  {% endfor %}
  </b>

   <p>
    </br>
  {# Add the plots for this metric #}
  {% for ptype, pfile in plotdict.iteritems() %}
    {% set thumbfile = run.getThumbname(pfile) %}
    <a href='{{run.outDir}}/{{pfile}}'> 
          <img class="thumbnail" src='{{run.outDir}}/{{thumbfile}}'></a>
  {% endfor  %}
  </br>

  <p>
  {% set caption = run.captionForMetric(metric) %}
  {{ caption }}
  </br>

  {# Add the summary stats for this metric #} 
  {% set stats = run.statsForMetric(metric) %}
  {% set statdict = run.statDict(stats) %}
  {% for name in statdict.keys() %}
    &#160;&#160;&#160;&#160;&#160
    <i>{{ name }}:</i> 
    {{ '%.2f' %(statdict[name]) }}  <br>
  {% endfor %}
  </div>
  <hr>
  {% endfor %}
 {% endfor %}
{% endfor %}


{% endblock %}
